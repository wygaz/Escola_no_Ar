{% extends "vocacional/base_vocacional.html" %}
{% load static %}

{% block title %}Avaliação Vocacional{% endblock %}

{# 
  Layout focado em:
  - dar destaque máximo ao questionário
  - deixar instruções menores e separadas
  - evitar duplicação de cabeçalho (o base_vocacional já mostra logo/título/botões)
#}

{% block vocacional_content %}

<style>
  /* Mantém tudo local por enquanto (sem mexer em CSS global).
     Se preferir, depois movemos isso para um CSS do vocacional. */

  .vocacional-cards {
    display: grid;
    grid-template-columns: minmax(0, 2fr) minmax(280px, 1fr);
    gap: 18px;
    align-items: start;
  }
  @media (max-width: 980px) {
    .vocacional-cards { grid-template-columns: 1fr; }
  }

  .voc-card {
    border-radius: 16px;
    padding: 18px;
  }

  /* Card do quiz: mais “presença” */
  .voc-card--quiz {
    padding: 20px;
    border: 1px solid rgba(255,255,255,.10);
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
  }

  /* Card das instruções: menor e mais “leve” */
  .voc-card--help {
    padding: 16px;
    border: 1px solid rgba(255,255,255,.08);
    opacity: .96;
  }
  .voc-card--help h3 { font-size: 1.05rem; margin: 0 0 10px 0; }
  .voc-card--help ul { margin: 10px 0 0 0; }
  .voc-card--help li { font-size: .95rem; line-height: 1.35rem; }

  /* Dá mais “respiro” dentro do quiz */
  .quiz-shell { margin-top: 6px; }
  .quiz-actions { margin-top: 14px !important; }
</style>

<div class="vocacional-cards">

  <!-- QUIZ (carro-chefe) -->
  <section class="card voc-card voc-card--quiz">
    <div class="quiz-shell">
      <div class="quiz-progress">
        <div class="progress">
          <div class="bar">
            <div id="progress-bar" class="bar-fill" style="width:0%"></div>
          </div>
        </div>
        <div class="progress-meta">
          <span id="progress-text">0/0 (0%)</span>
          <span>Questão <strong id="counter">0/0</strong></span>
        </div>
      </div>

      <form method="post" id="quiz-form" class="mt-3">
        {% csrf_token %}
        <div id="quiz-container"></div>

        <div class="quiz-actions" style="display:flex;gap:10px;flex-wrap:wrap;">
          <button type="button" id="prev-button" class="btn btn-secondary">&larr; Anterior</button>
          <button type="submit" name="action" value="save" class="btn btn-primary">Salvar</button>
          <button type="submit" name="action" value="finish" class="btn btn-primary">Finalizar</button>
          <button type="button" id="next-button" class="btn btn-secondary">Próxima &rarr;</button>
        </div>
      </form>
    </div>
  </section>

  <!-- INSTRUÇÕES (menores, separadas) -->
  <aside class="card voc-card voc-card--help">
    <h3>Como responder</h3>
    <p class="muted" style="margin:0;">
      Leva cerca de 10–15 minutos. Responda pensando em você hoje.
    </p>

    <ul class="list-disc pl-6 mt-2">
      <li>Marque de 1 a 5 (1 = discordo totalmente • 5 = concordo totalmente).</li>
      <li>Use as teclas <strong>← / →</strong> para voltar/avançar e as teclas <strong>1–5</strong> para marcar.</li>
      <li>Você não pode avançar deixando questão em branco.</li>
      <li>Ao fechar a aba, as respostas ficam salvas automaticamente.</li>
      <li>Ao final, clique em <strong>Finalizar</strong> para ver o resultado.</li>
    </ul>
  </aside>

</div>

<script>
  // O JS lê "window.quizData" para renderizar o questionário.
  window.quizData = {{ perguntas|safe }};
</script>
<script src="{% static 'vocacional/js/quiz.js' %}"></script>

{% endblock %}
