{% extends "base.html" %}
{% load static %}

{% block title %}Criar conta · Sonhe + Alto{% endblock %}
{% block body_class %}theme-sma sma-auth{% endblock %}

{% block site_header %}
<header class="sma-topbar sma-topbar--xl">
  <div class="container sma-topbar-inner">
    <a class="sma-brand" href="/projeto21/">
      <img class="sma-logo" src="{% static 'core/img/logo-sonhe-mais-alto.png' %}" alt="Sonhe + Alto">
      <div class="sma-brand-text">
        <strong>Projeto Sonhe + Alto</strong>
        <div class="sma-muted">Crie sua conta para acessar kits e plano</div>
      </div>
    </a>

    <div class="sma-actions">
      <a class="sma-pill" href="{% url 'contas:login' %}">Já tenho conta</a>
      <a class="sma-pill" href="/projeto21/">Voltar ao Sonhe + Alto</a>
    </div>
  </div>
</header>
{% endblock %}

{% block content %}
  <div class="sma-auth-wrap">
    <div class="sma-card">
      <h1 class="sma-title">Criar conta</h1>
      <p class="sma-sub">
        Dica: se você comprou na Hotmart, use o <strong>mesmo e-mail</strong>.
      </p>

      {% if form.non_field_errors %}
        <div class="sma-errors">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <form method="post">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ next|default:'' }}">
        
        <div class="sma-form-grid">
          <div class="sma-field">
            <label for="{{ form.first_name.id_for_label }}">Nome</label>
            {{ form.first_name }}
            {{ form.first_name.errors }}
          </div>

          <div class="sma-field">
            <label for="{{ form.last_name.id_for_label }}">Sobrenome</label>
            {{ form.last_name }}
            {{ form.last_name.errors }}
          </div>

          <div class="sma-field span2">
            <label for="{{ form.email.id_for_label }}">E-mail</label>
            {{ form.email }}
            {{ form.email.errors }}
          </div>

          <div class="sma-field">
            <label for="{{ form.password1.id_for_label }}">Senha</label>
            {{ form.password1 }}
            {{ form.password1.errors }}
            <div class="sma-help">Use uma senha forte.</div>
          </div>

          <div class="sma-field">
            <label for="{{ form.password2.id_for_label }}">Confirmar senha</label>
            {{ form.password2 }}
            {{ form.password2.errors }}
          </div>
        </div>

        <div class="sma-bottom">
          <label class="sma-help sma-inline-check">
            <input type="checkbox" id="toggle-pass">
            Mostrar senha
          </label>

          <button class="sma-btn sma-btn-primary" type="submit">Criar conta</button>

          <div class="sma-help">
            Já tem conta? <a class="sma-link" href="{% url 'contas:login' %}">Entrar</a>
          </div>
        </div>
      </form>
    </div>
  </div>
{% endblock %}

{% block footer %}
<footer class="site-footer">
  <div class="container">
    © Escola no Ar ·
    <a href="/sobre/">Sobre</a> ·
    <a href="/contato/">Contato</a> ·
    <a href="/privacidade/">Política de Privacidade</a>
  </div>
</footer>
{% endblock %}

{% block extra_scripts %}
<script>
  (function(){
    const ck = document.getElementById("toggle-pass");
    if (!ck) return;

    ck.addEventListener("change", function(){
      const p1 = document.getElementById("{{ form.password1.id_for_label }}");
      const p2 = document.getElementById("{{ form.password2.id_for_label }}");
      const type = ck.checked ? "text" : "password";
      if (p1) p1.type = type;
      if (p2) p2.type = type;
    });
  })();
</script>
{% endblock %}
