{% extends "base.html" %}
{% load auth_tags %}
{% block content %}
  <div class="container">
    <h1>Portal</h1>

    {# KPIs rÃ¡pidos (renderizam sÃ³ se vier algo do contexto) #}
    <div class="kpis">
      {% if cursos_count %}<div class="kpi"><div>ğŸ“š Cursos</div><div class="num">{{ cursos_count }}</div></div>{% endif %}
      {% if turmas_count %}<div class="kpi"><div>ğŸ‘¥ Turmas</div><div class="num">{{ turmas_count }}</div></div>{% endif %}
      {% if mentorandos_count %}<div class="kpi"><div>ğŸ¤ Mentorandos ativos</div><div class="num">{{ mentorandos_count }}</div></div>{% endif %}
      {% if atividades_pendentes %}<div class="kpi"><div>ğŸ“ Atividades pendentes</div><div class="num">{{ atividades_pendentes }}</div></div>{% endif %}
    </div>

    <div class="grid">
      {# ADMIN #}
      {% if user|has_perfil:"ADMIN" or user|in_group:"Admins" %}
        <div class="card card--acc card--admin">
          <div>ğŸ› ï¸</div>
          <h3>AdministraÃ§Ã£o</h3>
          <p class="desc">GovernanÃ§a do portal, usuÃ¡rios, permissÃµes e relatÃ³rios globais.</p>
          <div class="actions">
            <a class="btn" href="/admin/">Abrir Admin</a>
            <a class="btn" href="/relatorios/">RelatÃ³rios</a>
            <a class="btn" href="/contas/perfil/">Meu perfil</a>
          </div>
        </div>
      {% endif %}

      {# PROFESSOR #}
      {% if user|has_perfil:"PROF" or user|in_group:"Professores" or user.is_superuser %}
        <div class="card card--acc card--prof">
          <div>ğŸ‘©â€ğŸ«</div>
          <h3>Professor</h3>
          <p class="desc">Gerencie cursos, turmas e avaliaÃ§Ãµes dos alunos.</p>
          <div class="actions">
            <a class="btn" href="/cursos/">Meus Cursos</a>
            <a class="btn" href="/turmas/">Minhas Turmas</a>
            <a class="btn" href="/avaliacoes/">AvaliaÃ§Ãµes</a>
          </div>
        </div>
      {% endif %}

      {# MENTOR #}
      {% if user|has_perfil:"MENTOR" or user|in_group:"Mentores" or user.is_superuser %}
        <div class="card card--acc card--mentor">
          <div>ğŸ¤</div>
          <h3>Mentorias</h3>
          <p class="desc">
            Acompanhe o <strong>Projeto 21</strong> dos seus mentorandos:
            planos, estratÃ©gias e evoluÃ§Ã£o dos 21 dias.
          </p>
          <div class="actions">
            <a class="btn" href="/mentorias/">Mentorias</a>
            <a class="btn" href="/projeto21/mentor/">Projeto 21 (Mentor)</a>
            {# Futuro: quando o Vocacional estiver pronto, reativar:
            <a class="btn" href="/vocacional/mentor/">Vocacional (Mentor)</a>
            #}
          </div>
        </div>
      {% endif %}

      {# ALUNO #}
      {% if user|has_perfil:"ALUNO" or user|in_group:"Alunos" or user.is_superuser %}
        <div class="card card--acc card--aluno">
          <div>ğŸ’</div>
          <h3>Aluno</h3>
          <p class="desc">Acesse aulas, atividades e suas notas.</p>
          <div class="actions">
            <a class="btn" href="/meus-cursos/">Meus Cursos</a>
            <a class="btn" href="/atividades/">Minhas Atividades</a>
            <a class="btn" href="/notas/">Minhas Notas</a>
          </div>
        </div>
      {% endif %}

      {# USUÃRIO (sem matrÃ­cula) â€“ FOCO TOTAL NO PROJETO 21 #}
      {% if user|has_perfil:"USER" or user|in_group:"Usuarios" or user.is_superuser %}
        <div class="card card--acc card--usuario">
          <div>ğŸŒ±</div>
          <h3>Projeto 21 â€“ uma aventura com propÃ³sito</h3>
          <p class="desc">
            Bem-vindo(a) Ã  sua Ã¡rea de <strong>Desenvolvimento Pessoal</strong>.
            Aqui vocÃª entra no <strong>Projeto 21</strong>, escolhe suas estratÃ©gias
            e imprime a papelada para viver 21 dias de mudanÃ§as reais.
          </p>

          <div class="portal-next-steps">
            <strong>Por onde comeÃ§ar?</strong>
            <ul>
              <li>
                Clique em <strong>Entrar no Projeto 21</strong> para ir Ã  pÃ¡gina principal.
              </li>
              <li>
                LÃ¡ vocÃª poderÃ¡ <strong>baixar os kits</strong> e
                <strong>montar seu plano de estratÃ©gias</strong>.
              </li>
              <li>
                Depois Ã© sÃ³ <strong>imprimir a papelada</strong> e acompanhar os 21 dias.
              </li>
            </ul>
          </div>

          <div class="actions">
            <a class="btn" href="/projeto21/">Entrar no Projeto 21</a>
          </div>
        </div>
      {% endif %}
    </div>
  </div>  
{% endblock %}
